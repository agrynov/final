root@host:/home/john# /usr/sbin/sshd -d -p 3333 -f /etc/ssh/sshd_config.debug
debug1: sshd version OpenSSH_9.6, OpenSSL 3.0.13 30 Jan 2024
debug1: private host key #0: ssh-rsa SHA256:LrDuzRwZW5t+pJt4uHZXYPpYCNWRzmtsvR8GXtVWK08
debug1: private host key #1: ecdsa-sha2-nistp256 SHA256:mID/AeDFm5i8cbdH0X1gYZecL/m1iFXL0dGmRNqPXCM
debug1: private host key #2: ssh-ed25519 SHA256:bCee6+jaquYmlGT02R+WaGFI0lPyNXsxsVMTNTWTC7M
debug1: Set /proc/self/oom_score_adj from 0 to -1000
debug1: Bind to port 3333 on 0.0.0.0.
Server listening on 0.0.0.0 port 3333.
debug1: Bind to port 3333 on ::.
Server listening on :: port 3333.
debug1: Server will not fork when running in debugging mode.
Connection from 10.0.2.2 port 59428 on 10.0.2.15 port 3333 rdomain ""
debug1: Local version string SSH-2.0-OpenSSH_9.6p1 Ubuntu-3ubuntu13.5
debug1: Remote protocol version 2.0, remote software version OpenSSH_9.8
debug1: compat_banner: match: OpenSSH_9.8 pat OpenSSH* compat 0x04000000
debug1: permanently_set_uid: 108/65534 [preauth]
debug1: list_hostkey_types: rsa-sha2-512,rsa-sha2-256,ecdsa-sha2-nistp256,ssh-ed25519 [preauth]
debug1: SSH2_MSG_KEXINIT sent [preauth]
debug1: SSH2_MSG_KEXINIT received [preauth]
debug1: kex: algorithm: sntrup761x25519-sha512@openssh.com [preauth]
debug1: kex: host key algorithm: ssh-ed25519 [preauth]
debug1: kex: client->server cipher: chacha20-poly1305@openssh.com MAC: <implicit> compression: none [preauth]
debug1: kex: server->client cipher: chacha20-poly1305@openssh.com MAC: <implicit> compression: none [preauth]
debug1: expecting SSH2_MSG_KEX_ECDH_INIT [preauth]
debug1: SSH2_MSG_KEX_ECDH_INIT received [preauth]
debug1: ssh_packet_send2_wrapped: resetting send seqnr 3 [preauth]
debug1: rekey out after 134217728 blocks [preauth]
debug1: SSH2_MSG_NEWKEYS sent [preauth]
debug1: Sending SSH2_MSG_EXT_INFO [preauth]
debug1: expecting SSH2_MSG_NEWKEYS [preauth]
debug1: ssh_packet_read_poll2: resetting read seqnr 3 [preauth]
debug1: SSH2_MSG_NEWKEYS received [preauth]
debug1: rekey in after 134217728 blocks [preauth]
debug1: KEX done [preauth]
debug1: SSH2_MSG_EXT_INFO received [preauth]
debug1: kex_ext_info_check_ver: ext-info-in-auth@openssh.com=<0> [preauth]
debug1: userauth-request for user john service ssh-connection method none [preauth]
debug1: attempt 0 failures 0 [preauth]
debug1: kex_server_update_ext_info: Sending SSH2_MSG_EXT_INFO [preauth]
debug1: PAM: initializing for "john"
debug1: PAM: setting PAM_RHOST to "10.0.2.2"
debug1: PAM: setting PAM_TTY to "ssh"
debug1: userauth-request for user john service ssh-connection method publickey [preauth]
debug1: attempt 1 failures 0 [preauth]
debug1: userauth_pubkey: publickey test pkalg ssh-ed25519 pkblob ED25519 SHA256:FfXHh4uYIWn95ivWB4+CFwWZaYRfzotWrXGAjQpA/dg [preauth]
debug1: temporarily_use_uid: 1003/1003 (e=0/0)
debug1: trying public key file /home/john/.ssh/authorized_keys
debug1: fd 3 clearing O_NONBLOCK
debug1: /home/john/.ssh/authorized_keys:2: matching key found: ED25519 SHA256:FfXHh4uYIWn95ivWB4+CFwWZaYRfzotWrXGAjQpA/dg
debug1: /home/john/.ssh/authorized_keys:2: key options: agent-forwarding port-forwarding pty user-rc x11-forwarding
Accepted key ED25519 SHA256:FfXHh4uYIWn95ivWB4+CFwWZaYRfzotWrXGAjQpA/dg found at /home/john/.ssh/authorized_keys:2
debug1: restore_uid: 0/0
Postponed publickey for john from 10.0.2.2 port 59428 ssh2 [preauth]
debug1: userauth-request for user john service ssh-connection method publickey-hostbound-v00@openssh.com [preauth]
debug1: attempt 2 failures 0 [preauth]
debug1: temporarily_use_uid: 1003/1003 (e=0/0)
debug1: trying public key file /home/john/.ssh/authorized_keys
debug1: fd 3 clearing O_NONBLOCK
debug1: /home/john/.ssh/authorized_keys:2: matching key found: ED25519 SHA256:FfXHh4uYIWn95ivWB4+CFwWZaYRfzotWrXGAjQpA/dg
debug1: /home/john/.ssh/authorized_keys:2: key options: agent-forwarding port-forwarding pty user-rc x11-forwarding
Accepted key ED25519 SHA256:FfXHh4uYIWn95ivWB4+CFwWZaYRfzotWrXGAjQpA/dg found at /home/john/.ssh/authorized_keys:2
debug1: restore_uid: 0/0
debug1: auth_activate_options: setting new authentication options
debug1: do_pam_account: called
Accepted publickey for john from 10.0.2.2 port 59428 ssh2: ED25519 SHA256:FfXHh4uYIWn95ivWB4+CFwWZaYRfzotWrXGAjQpA/dg
debug1: monitor_child_preauth: user john authenticated by privileged process
debug1: auth_activate_options: setting new authentication options [preauth]
debug1: monitor_read_log: child log fd closed
debug1: PAM: establishing credentials
User child is on pid 2728
debug1: SELinux support disabled
debug1: PAM: establishing credentials
debug1: permanently_set_uid: 1003/1003
debug1: rekey in after 134217728 blocks
debug1: rekey out after 134217728 blocks
debug1: ssh_packet_set_postauth: called
debug1: active: key options: agent-forwarding port-forwarding pty user-rc x11-forwarding
debug1: Entering interactive session for SSH2.
debug1: server_init_dispatch
debug1: server_input_channel_open: ctype session rchan 0 win 1048576 max 16384
debug1: input_session_request
debug1: channel 0: new session [server-session] (inactive timeout: 0)
debug1: session_new: session 0
debug1: session_open: channel 0
debug1: session_open: session 0: link with channel 0
debug1: server_input_channel_open: confirm session
debug1: server_input_global_request: rtype no-more-sessions@openssh.com want_reply 0
debug1: server_input_channel_req: channel 0 request pty-req reply 1
debug1: session_by_channel: session 0 channel 0
debug1: session_input_channel_req: session 0 req pty-req
debug1: Allocating pty.
debug1: session_new: session 0
debug1: SELinux support disabled
debug1: session_pty_req: session 0 alloc /dev/pts/2
debug1: Ignoring unsupported tty mode opcode 11 (0xb)
debug1: Ignoring unsupported tty mode opcode 17 (0x11)
debug1: server_input_channel_req: channel 0 request env reply 0
debug1: session_by_channel: session 0 channel 0
debug1: session_input_channel_req: session 0 req env
debug1: server_input_channel_req: channel 0 request shell reply 1
debug1: session_by_channel: session 0 channel 0
debug1: session_input_channel_req: session 0 req shell
Starting session: shell on pts/2 for john from 10.0.2.2 port 59428 id 0
debug1: Setting controlling tty using TIOCSCTTY.
^Cdebug1: do_cleanup
debug1: PAM: cleanup
debug1: PAM: closing session
debug1: PAM: deleting credentials
debug1: temporarily_use_uid: 1003/1003 (e=0/0)
debug1: restore_uid: 0/0
debug1: session_pty_cleanup2: session 0 release /dev/pts/2
debug1: audit_event: unhandled event 12